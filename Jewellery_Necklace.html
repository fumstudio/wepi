<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>About Us</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
   <link rel="stylesheet" href="css/catalog.css">
      <link rel="stylesheet" href="css/Product.css
    ">
          <link rel="stylesheet" href="css/Itempage.css">     
   <link rel= "Shortcut icon" type="x-icon" href= "https://i.postimg.cc/XqrhcVpD/20240702-095704.png "> 

<meta name="google-site-verification" content="c6IEOWw2gr7deS66lgrvu5-eNfUoRfR4UidciqEeoGk" />

  <meta name="description" content="
  keep that special person or moment close to the heart.
">
    <!-- Open Graph Meta Tags -->
  <title>Jewelry_Necklace</title>
    <meta property="og:image" content="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FUntitled%20design%20(3).jpg?alt=media&token=034dd3b1-f46a-4bbe-bb71-c5ceb3b44f6d" /> <!-- Ensure this is a valid image URL -->
    
    <meta property="og:url" content="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FUntitled%20design%20(3).jpg?alt=media&token=034dd3b1-f46a-4bbe-bb71-c5ceb3b44f6d" /> 
  
  <meta name="keywords"  content="Fumstudio, fum.studio, fumstudio.shop">


  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9RJSDSSVMM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9RJSDSSVMM');
</script>
  
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MNW5B4W9');</script>
<!-- End Google Tag Manager -->

 
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
        $(function(){
            $("#navbar").load("navbar.html");
        });
    </script>
 <script>
        $(function(){
            $("#Steel_Necklace2").load("Set_Steel_Necklace2.html");
        });
    </script>
     <script>
        $(function(){
            $("#Photo_Bracelet").load("Set_Photo_Bracelet.html");
        });
    </script>
            <script>
        $(function(){
            $("#Whatsapp_button").load("whatsApp_button.html");
        });
    </script>
        <script>
        $(function(){
            $("#footer").load("footer.html");
        });
</script>

</head>
<body>
<div class="background">
<div class="container2">

 <div class="menu-btn">
    <i class="fas fa-bars fa-2x"></i>
  </div>


    <!-- Nav -->
    
<nav class="main-nav">
  <!-- Navigation content -->


<i class="fas fa-arrow-left back-button" onclick="goBack()"></i>

<script>

function goBack() {
    window.history.back();
}

</script></h1>
 <h1 class="item-name">Jewellery Necklace</h1>
        <div id="navbar"></div>
<div class="dark-overlay"></div> 

    <a href="cart.html" id="cartLink">
        <i class="fas fa-shopping-cart cart-icon"></i> <span class="cart-count">0</span>
    </a>

        </nav>
 <br>        <br>        <br>  <br> 
         <!-- Design Selector Button -->

<div class="container">
    <div class="flex flex-col md:flex-row">
        <div class="slider" id="slider">
            <div class="slides" id="slides">
                                              <div class="slide">
                                             <img class="w-full" src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FN5.jpg?alt=media&token=4025362e-31e7-4cee-8d5c-88ea7b8a1cee"  alt="Image 1">                                      

                </div>
    <div class="slide">
  <img class="w-full" src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2F50cm.jpg?alt=media&token=8974cbc6-922f-48f8-a028-6cf0e845be19"          
 alt="Image 2">
                </div>
                <div class="slide">
                    <img class="w-full" src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FUntitled%20design%20(2).jpg?alt=media&token=9da1f95b-23fd-4a12-8090-15d1ed2fbe5d" alt="Image 3">
                </div>
                <div class="slide">
                    <img class="w-full" src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2F1.png?alt=media&token=4e1dd917-a7ee-4967-ab40-5c6a4f18a8de" alt="Image 4">
                </div>

                
                <div class="slide">
                    <img class="w-full" src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2F3cm.jpg?alt=media&token=1057e3d2-947d-4ce0-94fe-bc4d9e0fb0e2" alt="Image 5">
                </div>
                <div class="slide">
                                      <img class="w-full" src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2F2.png?alt=media&token=9e10ca26-4649-4989-a1e8-69e22ff08e95"
 alt="Image 6">

            </div>
                 <div class="slide">
                                      <img class="w-full" src="https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FWhatsApp%20Image%202024-10-26%20at%208.00.17%20AM.jpeg?alt=media&token=ec7cbfec-5b3e-4bab-a4ea-bd88c1ba2972"
 alt="Image 7">
                </div>  
                                </div>         
            <span class="slide-count" id="slideCount">1/5</span>
            <button id="prevButton" class="slide-button">&lt;</button>
            <button id="nextButton" class="slide-button">&gt;</button>
        </div>
        <div class="product-details">

            <p class="product-description">keep that special person or moment close to the heart.</p>
 

    <div class="product-info">
         <span class="product-price price" data-price="259.99">
    ZAR259.99
</span>     <span class="price line-through" data-price="299.99">
    ZAR299.99
</span>
  <script>
        // Check if the script tag has already been added
        if (!document.querySelector('script[src="currency-converter.js"]')) {
            // If not added, dynamically add the script tag
            var script = document.createElement('script');
            script.src = 'currency-converter.js';
            document.body.appendChild(script);
        }
    </script>

    <button class="share-button" onclick="sharePhoto()" style="border: none; background: none; cursor: pointer;">
<i class="fas fa-share"></i>
    </button>
</div>            
               
    <h6 class="product-title">Free shipping</h6>
    <p>3-9 business days</p>


    <div class="modal2" id="modal2">
        <div class="modal-content2">
            <span id="modal-message"></span><br>
            <button class="close-button" onclick="closeModal()">OK</button>
        </div>
    </div>


    <script>
        const shareText = 'https://fumstudio.shop/Jewellery_Necklace.html,keep that special person or moment close to the heart.';

        function showModal(message) {
            const modal = document.getElementById('modal');
            const modalMessage = document.getElementById('modal-message');
            modalMessage.textContent = message;
            modal.style.display = 'block'; // Show the modal
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            modal.style.display = 'none'; // Hide the modal
        }

        function sharePhoto() {
            if (navigator.share) {
                navigator.share({
                    title: 'Share this Photo',
                    text: shareText,
                });
            } else {
                showModal('Sharing is not supported in this browser. Please use a compatible browser or device.');
            }
        }
    </script>                       
       
                             
<br>
       <div id="likeSection">
        <div id="like-container">
            <i id="like-button" class="fas fa-thumbs-up"></i>
        </div>

        <span>Likes: </span><span id="like-count">0</span>
    </div>

    <div id="custom-alert" style="display: none;">
        <div class="alert-content">
            <p></p>
        </p>
            <br>
            <button id="alert-ok-button">OK</button>
        </div>
    </div>       <div class="mt-4">
             
            </div>

            <button id="detailsButton" class="details-button">Details</button>
              <button class="order-button">
                <i class="fas fa-shopping-cart"></i> Order Now
            </button>         
            </div>
        </div>
    </div>
</div>

<div id="overlay" class="overlay hidden">
    <div class="overlay-content">
              <button id="closeButton" class="close-button2">X</button>
        <h3 class="overlay-title">Details</h3>
        <p class="overlay-description">1 Male | Female,1 Picture,color: silver,Pendant: 3.5cm round circle,Necklace sizes: 50cm or 58cm, Box color: PINK or Lightblue,4x6.</p>

    </div>
</div>
    <div class="containercomments">



  <div id="total-comments">Comments: 0</div>
  <div id="comments-container"></div>
  <br>
  <div id="comment-form">
    <input type="text" id="comment-input" placeholder="Write a comment..." />
    <button id="submit-comment" style="background-color: black; color: white;">
      <i class="fas fa-paper-plane" style="margin-right: 5px;"></i> Submit
    </button>
  </div>
  <!-- Modal for confirmation -->
  <div id="modal">
    <div id="modal-content">
      <p>Are you sure you want to delete this comment?</p>
      <button id="yes-button" class="modal-button yes-button">Yes</button>
      <button id="no-button" class="modal-button no-button">No</button>
    </div>
  </div>

<!-- Custom Alert Modal -->
<div id="custom-alert-modal" style="display:none;">
  <div id="custom-alert-modal-content">
    <p>Links and numbers are not allowed.</p>
    <button id="custom-alert-button" class="modal-button alert-button" style="background-color: black; color: white;">OK</button>
  </div>
</div>

  
  <!-- Edit Modal -->
  <div id="edit-modal">
    <div id="edit-modal-content">
      <p>Edit comment:</p>
      <br>
      <textarea id="edit-comment-input" rows="4" cols="30"></textarea>
      <br>
      <button id="save-edit-button" class="modal-button edit-button-style">Save</button>
      <button id="cancel-edit-button" class="modal-button no-button">Cancel</button>
    </div>
  </div>
  </div>

<script>
    const detailsButton = document.getElementById('detailsButton');
    const closeButton = document.getElementById('closeButton');
    const overlay = document.getElementById('overlay');
    const commentInput = document.getElementById('commentInput');
    const submitComment = document.getElementById('submitComment');
    const commentsList = document.getElementById('commentsList');
    const slider = document.getElementById('slider');

    detailsButton.addEventListener('click', () => {
        overlay.classList.remove('hidden');
    });

    closeButton.addEventListener('click', () => {
        overlay.classList.add('hidden');
    });

   

    let currentIndex = 0;
    const slides = document.getElementById('slides');
    const totalSlides = slides.children.length;
    const slideCount = document.getElementById('slideCount');

    function updateSlide() {
        slides.style.transform = `translateX(-${currentIndex * 100}%)`;
        slideCount.textContent = `${currentIndex + 1}/${totalSlides}`;
    }

    document.getElementById('prevButton').addEventListener('click', () => {
        currentIndex = (currentIndex > 0) ? currentIndex - 1 : totalSlides - 1;
        updateSlide();
    });

    document.getElementById('nextButton').addEventListener('click', () => {
        currentIndex = (currentIndex < totalSlides - 1) ? currentIndex + 1 : 0;
        updateSlide();
    });

    // Touch event listeners for swiping
    let startX;
    let isDragging = false;

    slider.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
        isDragging = true;
    });

    slider.addEventListener('touchmove', (e) => {
        if (!isDragging) return;

        const moveX = e.touches[0].clientX;
        const diffX = startX - moveX;

        if (Math.abs(diffX) > 30) { // Reduced threshold for swipe
            e.preventDefault(); // Prevent default scrolling behavior

            if (diffX > 30) {
                // Swipe left
                currentIndex = (currentIndex < totalSlides - 1) ? currentIndex + 1 : 0;
                updateSlide();
            } else if (diffX < -30) {
                // Swipe right
                currentIndex = (currentIndex > 0) ? currentIndex - 1 : totalSlides - 1;
                updateSlide();
            }
            isDragging = false; // Stop dragging after one swipe
        }
    });

    slider.addEventListener('touchend', () => {
        isDragging = false; // Reset dragging state
    });
  
</script>

<!-- like button-->
   <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
        import { getDatabase, ref, onValue, set } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js';

        const firebaseConfig = {
            apiKey: "AIzaSyBDrzrgLslaJvnXbo1e90irCEtdcm9ZsCU",
            authDomain: "logins-13661.firebaseapp.com",
            databaseURL: "https://logins-13661-default-rtdb.firebaseio.com",
            projectId: "logins-13661",
            storageBucket: "logins-13661.appspot.com",
            messagingSenderId: "451535349483",
            appId: "1:451535349483:web:d3c9867fd2bffbbdca40ae",
            measurementId: "G-DWP16WX2H7"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth(app);
        const pageId = "page21";
        const pageName = "Pouches";
        const pageImages = [
            "https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FUntitled%20design%20(2).jpg?alt=media&token=9da1f95b-23fd-4a12-8090-15d1ed2fbe5d",
            "https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2F1.png?alt=media&token=4e1dd917-a7ee-4967-ab40-5c6a4f18a8de",
           "https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2F3cm.jpg?alt=media&token=1057e3d2-947d-4ce0-94fe-bc4d9e0fb0e2",
        ];
        const pageLink = "https://ae01.alicdn.com/kf/Hc4b4f10bf3dd46fe964ceec0a0aeff19K/Beautiful-Heart-Quicksand-Key-Chain-For-Girl-Bag-Pendant-Lovely-Love-Keyfob-Moving-Liquid-Keychain-Floating.jpg";
        const pageDescription = "keep that special person or moment close to the heart.";

        const likeButton = document.getElementById('like-button');
        const likeCount = document.getElementById('like-count');
        const customAlert = document.getElementById('custom-alert');
        const okButton = document.getElementById('alert-ok-button');

        let userId;
        let currentLikes = 0;
        let liked = false;

        // Load total likes (for both logged in and out users)
        const publicLikesRef = ref(database, `publicLikes/${pageId}`); 
        onValue(publicLikesRef, (snapshot) => {
            const data = snapshot.val();
            if (data) {
                likeCount.textContent = formatLikes(data.count || 0); 
            }
        });

        const formatLikes = (num) => {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
        };

        auth.onAuthStateChanged((user) => {
            if (user) {
                userId = user.uid;
                loadLikes(); // Load user-specific likes
            }
        });

        // Load likes
        const loadLikes = () => {
            const likesRef = ref(database, `likes/${pageId}`);
            onValue(likesRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    currentLikes = data.count || 0;
                    liked = data.users && userId && data.users[userId] === true; // Check if user is logged in

                    updateLikeButton();
                }
            });
        };

        const updateLikeButton = () => {
            likeButton.classList.toggle('liked', liked);
            likeButton.classList.toggle('fa-thumbs-up', !liked);
            likeButton.classList.toggle('fa-gift', liked);
        };

        const showAlert = () => {
            customAlert.style.display = 'flex'; // Show the modal
        };

        okButton.addEventListener('click', () => {
            customAlert.style.display = 'none'; // Hide the modal
        });

likeButton.addEventListener('click', () => {
    if (!userId) {
        window.location.href = 'login.html'; // Redirect to login page
        return;
    }

    liked = !liked;
    currentLikes += liked ? 1 : -1;

    // Update both "likes" and "publicLikes"
    const likesRef = ref(database, `likes/${pageId}`);
    onValue(likesRef, (snapshot) => {
        const data = snapshot.val() || {};
        const users = data.users || {};

        if (liked) {
            users[userId] = true;
        } else {
            delete users[userId]; 
        }

        // Update the likes count
        set(likesRef, {
            count: currentLikes,
            users: users
        }).then(() => {
            likeCount.textContent = formatLikes(currentLikes);
            updateLikeButton();
        });

        const likedPagesRef = ref(database, `likedPages/${userId}/${pageId}`);
        if (liked) {
            set(likedPagesRef, {
                name: pageName,
                images: pageImages,
                link: pageLink,
                description: pageDescription
            });
        } else {
            set(likedPagesRef, null);
        } 

        // Update the public likes count
        const publicLikesRef = ref(database, `publicLikes/${pageId}`);
        set(publicLikesRef, {
            count: currentLikes 
        });
    });
});

    </script>
<!-- comments-->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
    import { getDatabase, ref as dbRef, onValue, set, get, remove } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js';
    import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js';

    const firebaseConfig = {
      apiKey: "AIzaSyBDrzrgLslaJvnXbo1e90irCEtdcm9ZsCU",
      authDomain: "logins-13661.firebaseapp.com",
      databaseURL: "https://logins-13661-default-rtdb.firebaseio.com",
      projectId: "logins-13661",
      storageBucket: "logins-13661.appspot.com",
      messagingSenderId: "451535349483",
      appId: "1:451535349483:web:d3c9867fd2bffbbdca40ae",
      measurementId: "G-DWP16WX2H7"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const auth = getAuth(app);
    const pageId = "page4"; 
    const defaultPhotoURL = "https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FWhatsApp%20Image%202024-09-26%20at%207.51.40%20AM.jpeg?alt=media&token=42565b33-c522-4167-bbd6-3a7f267d6627";

    const commentsRef = dbRef(database, 'comments/' + pageId);
    const commentsContainer = document.getElementById('comments-container');
    const totalCommentsElement = document.getElementById('total-comments');
    const modal = document.getElementById('modal');
    const yesButton = document.getElementById('yes-button');
    const noButton = document.getElementById('no-button');
    const alertModal = document.getElementById('alert-modal');
    const alertButton = document.getElementById('alert-button');
    const editModal = document.getElementById('edit-modal');
    const editCommentInput = document.getElementById('edit-comment-input');
    const saveEditButton = document.getElementById('save-edit-button');
    const cancelEditButton = document.getElementById('cancel-edit-button');

    let commentToDelete = null; // Store the comment key to delete
    let commentToEditKey = null; // Store the comment key to edit

    // Load existing comments
    onValue(commentsRef, (snapshot) => {
      commentsContainer.innerHTML = ''; 
      let totalComments = 0;

      if (snapshot.exists()) {
        snapshot.forEach(commentSnapshot => {
          const commentData = commentSnapshot.val();
          const commentElement = document.createElement('div');
          commentElement.classList.add('comment');
          commentElement.dataset.uid = commentData.uid;
          commentElement.dataset.commentKey = commentSnapshot.key;
          const userPhoto = commentData.photoURL || defaultPhotoURL; 

        const img = document.createElement("img");
img.classList.add('comment-img'); // Add the new class
img.src = userPhoto;
img.alt = `${commentData.name}'s photo`;
img.onerror = () => {
  img.src = "https://firebasestorage.googleapis.com/v0/b/myhost-a7ee9.appspot.com/o/images%2FWhatsApp%20Image%202024-09-26%20at%207.51.40%20AM.jpeg?alt=media&token=42565b33-c522-4167-bbd6-3a7f267d6627";
};
 

          commentElement.innerHTML = `
            <div class="comment-content">
              <div class="comment-author">${commentData.name}</div>
              <div class="comment-text">${commentData.comment}</div>
            </div>
            <div class="icon-container" style="display: ${auth.currentUser && auth.currentUser.uid === commentData.uid ? 'block' : 'none'};" onclick="toggleOptions(event)">
              <i class="fas fa-ellipsis-v" style="color: black;"></i>
              <div class="options">
                <div class="option edit-button" style="display: none;"><i class="fas fa-edit"></i> Edit</div>
                <div class="option delete-button" style="display: none;"><i class="fas fa-trash"></i> Delete</div>
              </div>
            </div>
          `;
          commentElement.prepend(img);
          commentsContainer.prepend(commentElement); 
          totalComments++;

          // Show edit and delete buttons only for the comment owner
          const currentUser = auth.currentUser;
          if (currentUser && currentUser.uid === commentData.uid) {
            const editButton = commentElement.querySelector('.edit-button');
            const deleteButton = commentElement.querySelector('.delete-button');

            // Attach event listeners for edit and delete buttons
            editButton.style.display = 'block'; // Show edit button
            deleteButton.style.display = 'block'; // Show delete button

            editButton.addEventListener('click', () => {
              commentToEditKey = commentSnapshot.key; // Set the key for editing
              editCommentInput.value = commentData.comment; // Set the current comment for editing
              editModal.style.display = 'flex'; // Show the edit modal
            });

            deleteButton.addEventListener('click', () => {
              commentToDelete = commentSnapshot.key; // Set the key for deletion
              modal.style.display = 'flex'; // Show the modal
            });
          }
        });
      }
      totalCommentsElement.textContent = `Comments: ${totalComments}`;
    });

// Handle comment submission
document.getElementById('submit-comment').addEventListener('click', async () => {
  const commentInput = document.getElementById('comment-input');
  const user = auth.currentUser;

  if (user && commentInput.value) {
    const commentText = commentInput.value.trim();
    
    // Regular expression to check for links or numbers
    const containsLinkOrNumber = /https?:\/\/[^\s]+|[0-9]/.test(commentText);
    
    if (containsLinkOrNumber) {
      // Show custom alert modal
      document.getElementById('custom-alert-modal').style.display = 'flex';
      return; // Stop the submission
    }
    
    const userSnapshot = await get(dbRef(database, 'users/' + user.uid));
    const userData = userSnapshot.val();

    const newCommentRef = dbRef(database, 'comments/' + pageId + '/' + Date.now());
    await set(newCommentRef, {
      uid: user.uid,
      name: `${userData.firstName} ${userData.lastName}`,
      email: user.email,
      photoURL: userData.photoURL || '',
      comment: commentText
    });

    commentInput.value = ''; 
  } else {
    // Redirect to login.html instead of showing an alert
    window.location.href = 'login.html';
  }
});

    // Handle modal button actions
    yesButton.addEventListener('click', () => {
      if (commentToDelete) {
        remove(dbRef(database, 'comments/' + pageId + '/' + commentToDelete));
        commentToDelete = null; // Reset after deletion
      }
      modal.style.display = 'none'; // Hide the modal
    });

    noButton.addEventListener('click', () => {
      modal.style.display = 'none'; // Hide the modal
      commentToDelete = null; // Reset
    });

    alertButton.addEventListener('click', () => {
      alertModal.style.display = 'none'; // Hide alert modal
    });

    // Handle editing the comment
    saveEditButton.addEventListener('click', async () => {
      const newComment = editCommentInput.value.trim();
      if (newComment !== "") {
        const user = auth.currentUser;
        const userSnapshot = await get(dbRef(database, 'users/' + user.uid));
        const userData = userSnapshot.val();

        await set(dbRef(database, 'comments/' + pageId + '/' + commentToEditKey), {
          uid: user.uid,
          name: `${userData.firstName} ${userData.lastName}`,
          email: user.email,
          photoURL: userData.photoURL || defaultPhotoURL,
          comment: newComment
        });

        editModal.style.display = 'none'; // Hide edit modal
        commentToEditKey = null; // Reset after editing
      }
    });

    cancelEditButton.addEventListener('click', () => {
      editModal.style.display = 'none'; // Hide edit modal
      commentToEditKey = null; // Reset
    });

    // Listen for changes in the user's profile
    onAuthStateChanged(auth, (user) => {
      if (user) {
        const userRef = dbRef(database, 'users/' + user.uid);
        
        // Listen for changes in user data
        onValue(userRef, (snapshot) => {
          const userData = snapshot.val();
          if (userData) {
            // Update comments with new user data
            commentsContainer.querySelectorAll('.comment').forEach(commentElement => {
              if (commentElement.dataset.uid === user.uid) {
                const commentKey = commentElement.dataset.commentKey;
                // Update comment name and photo
                set(dbRef(database, 'comments/' + pageId + '/' + commentKey), {
                  uid: user.uid,
                  name: `${userData.firstName} ${userData.lastName}`, // Update name
                  email: user.email,
                  photoURL: userData.photoURL || defaultPhotoURL, // Update photo URL
                  comment: commentElement.querySelector('.comment-text').textContent // Keep the original comment text
                });
                // Update the displayed name and photo in the comments section
                commentElement.querySelector('.comment-author').textContent = `${userData.firstName} ${userData.lastName}`;
                const img = commentElement.querySelector('img');
                img.src = userData.photoURL || defaultPhotoURL;
                img.onerror = () => {
                  img.src = "https://za.rapid.studio/ocache/821/resources/themes/kh-preview-05.webp?size=1320&t=1735689600"; 
                };
              }
            });
          }
        });
      }
    });

    // Toggle options visibility
    window.toggleOptions = function(event) {
      const options = event.currentTarget.querySelector('.options');
      options.style.display = options.style.display === 'block' ? 'none' : 'block';
      
      // Close other options
      const allOptions = document.querySelectorAll('.options');
      allOptions.forEach(opt => {
        if (opt !== options) {
          opt.style.display = 'none';
        }
      });

      // Prevent event bubbling
      event.stopPropagation();
    };

    // Close options when clicking outside
    document.addEventListener('click', function() {
      const allOptions = document.querySelectorAll('.options');
      allOptions.forEach(opt => {
        opt.style.display = 'none';
      });
    });
  </script>
   <div id="Whatsapp_button"></div>
      <section>
     <p id="like" class="like">You might also like</p>

<div class="container3">



  <div class="product">


 <div id="Photo_Bracelet"></div>
</div>
       
  <div class="product">

 <div id="Steel_Necklace2"></div>
</div>

 </div>
 </div>
   </section>
   <br>   <br>      <br>   
       <div id="footer"></div>
       </div></div>
 
<!-- partial -->
  <script src='https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js'></script><script  src="js/script.js"></script>
  
 <script src="details_&amp;_button_slide.js"></script>
 
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MNW5B4W9"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
 <script src="js/main.js"></script>
 <script src="js/cart.js"></script>

</body>
</html>